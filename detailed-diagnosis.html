<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>è¯¦ç»†è¯Šæ–­</title>
</head>
<body style="width: 400px; height: 600px; padding: 20px; background: #f8f9fa; font-family: Arial, sans-serif; font-size: 14px;">
    <h3>ğŸ” Firefox JavaScriptè¯¦ç»†è¯Šæ–­</h3>
    
    <div id="status" style="background: #ffcccc; padding: 10px; margin: 10px 0; border-radius: 4px; font-weight: bold;">
        JavaScriptçŠ¶æ€ï¼šæ£€æµ‹ä¸­...
    </div>
    
    <div id="info" style="background: #e9ecef; padding: 10px; margin: 10px 0; border-radius: 4px; font-size: 12px; line-height: 1.4;">
        æµè§ˆå™¨ä¿¡æ¯åŠ è½½ä¸­...
    </div>
    
    <button onclick="runDiagnosis()" style="width: 100%; padding: 12px; margin: 10px 0; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
        ğŸ” è¿è¡Œå®Œæ•´è¯Šæ–­
    </button>
    
    <button onclick="testBasicJS()" style="width: 100%; padding: 12px; margin: 10px 0; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
        âœ… æµ‹è¯•åŸºç¡€JavaScript
    </button>
    
    <button onclick="testConsole()" style="width: 100%; padding: 12px; margin: 10px 0; background: #ffc107; color: #212529; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
        ğŸ“ æµ‹è¯•æ§åˆ¶å°
    </button>
    
    <div id="results" style="background: #fff; padding: 10px; margin: 10px 0; border-radius: 4px; border: 1px solid #ddd; max-height: 200px; overflow-y: auto; font-size: 12px;">
        è¯Šæ–­ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
    </div>
    
    <div style="background: #d1ecf1; padding: 10px; margin: 10px 0; border-radius: 4px; font-size: 12px;">
        <strong>è¯Šæ–­è¯´æ˜ï¼š</strong><br>
        1. å¦‚æœçœ‹åˆ°è¿™ä¸ªé¡µé¢ä½†æŒ‰é’®æ— æ•ˆ â†’ JavaScriptè¢«é˜»æ­¢<br>
        2. å¦‚æœæŒ‰é’®æœ‰æ•ˆä½†æ‰©å±•æ— æ•ˆ â†’ æ‰©å±•æƒé™é—®é¢˜<br>
        3. è¯·æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
    </div>
    
    <script>
        console.log('ğŸ” è¯¦ç»†è¯Šæ–­è„šæœ¬å¼€å§‹æ‰§è¡Œ');
        
        // ç«‹å³æ›´æ–°çŠ¶æ€
        function updateStatus() {
            const statusEl = document.getElementById('status');
            const infoEl = document.getElementById('info');
            
            if (statusEl) {
                statusEl.innerHTML = 'JavaScriptçŠ¶æ€ï¼šâœ… æ­£å¸¸æ‰§è¡Œ - ' + new Date().toLocaleString();
                statusEl.style.background = '#ccffcc';
            }
            
            if (infoEl) {
                let info = 'æµè§ˆå™¨ä¿¡æ¯ï¼š<br>';
                info += 'â€¢ ç”¨æˆ·ä»£ç†: ' + navigator.userAgent + '<br>';
                info += 'â€¢ è¯­è¨€: ' + navigator.language + '<br>';
                info += 'â€¢ å¹³å°: ' + navigator.platform + '<br>';
                info += 'â€¢ Cookieå¯ç”¨: ' + navigator.cookieEnabled + '<br>';
                info += 'â€¢ åœ¨çº¿çŠ¶æ€: ' + navigator.onLine + '<br>';
                info += 'â€¢ é¡µé¢URL: ' + window.location.href + '<br>';
                info += 'â€¢ æ–‡æ¡£çŠ¶æ€: ' + document.readyState + '<br>';
                infoEl.innerHTML = info;
            }
        }
        
        // è¿è¡Œå®Œæ•´è¯Šæ–­
        function runDiagnosis() {
            console.log('ğŸ” è¿è¡Œå®Œæ•´è¯Šæ–­');
            const resultsEl = document.getElementById('results');
            
            let results = 'å®Œæ•´è¯Šæ–­ç»“æœï¼š<br><br>';
            
            // åŸºç¡€JavaScriptåŠŸèƒ½
            try {
                const testDate = new Date();
                results += 'âœ… Dateå¯¹è±¡: æ­£å¸¸ (' + testDate.toLocaleString() + ')<br>';
            } catch (e) {
                results += 'âŒ Dateå¯¹è±¡: å¤±è´¥ - ' + e.message + '<br>';
            }
            
            // JSONåŠŸèƒ½
            try {
                const testObj = {test: 'value'};
                const jsonStr = JSON.stringify(testObj);
                results += 'âœ… JSON: æ­£å¸¸ (' + jsonStr + ')<br>';
            } catch (e) {
                results += 'âŒ JSON: å¤±è´¥ - ' + e.message + '<br>';
            }
            
            // DOMæ“ä½œ
            try {
                const testDiv = document.createElement('div');
                testDiv.innerHTML = 'test';
                results += 'âœ… DOMæ“ä½œ: æ­£å¸¸<br>';
            } catch (e) {
                results += 'âŒ DOMæ“ä½œ: å¤±è´¥ - ' + e.message + '<br>';
            }
            
            // äº‹ä»¶å¤„ç†
            try {
                const testHandler = function() { return true; };
                results += 'âœ… äº‹ä»¶å¤„ç†: æ­£å¸¸<br>';
            } catch (e) {
                results += 'âŒ äº‹ä»¶å¤„ç†: å¤±è´¥ - ' + e.message + '<br>';
            }
            
            // å¼‚æ­¥åŠŸèƒ½
            try {
                setTimeout(function() {
                    console.log('å¼‚æ­¥æµ‹è¯•å®Œæˆ');
                }, 100);
                results += 'âœ… å¼‚æ­¥åŠŸèƒ½: æ­£å¸¸<br>';
            } catch (e) {
                results += 'âŒ å¼‚æ­¥åŠŸèƒ½: å¤±è´¥ - ' + e.message + '<br>';
            }
            
            // å­˜å‚¨API
            try {
                if (typeof localStorage !== 'undefined') {
                    localStorage.setItem('test', 'value');
                    localStorage.removeItem('test');
                    results += 'âœ… localStorage: æ­£å¸¸<br>';
                } else {
                    results += 'âš ï¸ localStorage: ä¸å¯ç”¨<br>';
                }
            } catch (e) {
                results += 'âŒ localStorage: å¤±è´¥ - ' + e.message + '<br>';
            }
            
            results += '<br>è¯Šæ–­å®Œæˆæ—¶é—´: ' + new Date().toLocaleString();
            
            if (resultsEl) {
                resultsEl.innerHTML = results;
            }
            
            alert('å®Œæ•´è¯Šæ–­å·²å®Œæˆï¼è¯·æŸ¥çœ‹ç»“æœåŒºåŸŸã€‚');
        }
        
        // æµ‹è¯•åŸºç¡€JavaScript
        function testBasicJS() {
            console.log('âœ… æµ‹è¯•åŸºç¡€JavaScript');
            alert('âœ… åŸºç¡€JavaScriptæµ‹è¯•æˆåŠŸï¼\n\nå¦‚æœæ‚¨çœ‹åˆ°è¿™ä¸ªå¼¹çª—ï¼Œè¯´æ˜JavaScriptåŸºæœ¬åŠŸèƒ½æ­£å¸¸ã€‚');
        }
        
        // æµ‹è¯•æ§åˆ¶å°
        function testConsole() {
            console.log('ğŸ“ æ§åˆ¶å°æµ‹è¯•å¼€å§‹');
            console.log('è¿™æ˜¯ä¸€æ¡æ™®é€šæ—¥å¿—');
            console.warn('è¿™æ˜¯ä¸€æ¡è­¦å‘Šæ—¥å¿—');
            console.error('è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—ï¼ˆæµ‹è¯•ç”¨ï¼‰');
            console.info('è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—');
            console.log('ğŸ“ æ§åˆ¶å°æµ‹è¯•å®Œæˆ');
            alert('ğŸ“ æ§åˆ¶å°æµ‹è¯•å®Œæˆï¼\n\nè¯·æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ ‡ç­¾é¡µä¸­çš„æ—¥å¿—ä¿¡æ¯ã€‚');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', updateStatus);
        
        // å¦‚æœDOMå·²ç»åŠ è½½å®Œæˆï¼Œç«‹å³æ‰§è¡Œ
        if (document.readyState === 'complete' || document.readyState === 'interactive') {
            updateStatus();
        }
        
        console.log('ğŸ” è¯¦ç»†è¯Šæ–­è„šæœ¬æ‰§è¡Œå®Œæˆ');
    </script>
</body>
</html>
